#include "overlay_toolbar.h"
#include "list_view.h"
#include "button.h"
#include "k.h"

#include <QDebug>

karin::overlay_toolbar::overlay_toolbar(QGraphicsWidget *parent)
	: karin::timer_popup(parent),
	m_container(new karin::list_view_layout(this))
{
	setObjectName(OBJECTNAME_OVERLAY_TOOLBAR);
	setPopupType(karin::popup::Popup_Fade);
	setCentralWidget(m_container);
	setFixedSize(320, 240);
}

karin::overlay_toolbar::~overlay_toolbar()
{
}

void karin::overlay_toolbar::addActionItem(karin::button *action)
{
	m_container->addItem(action);
	setFixedSize(m_container->boundingRect().size().toSize());
	qDebug()<<(m_container->boundingRect().size());
}

void karin::overlay_toolbar::setPosition(const QPointF &pos, ToolbarPlacement placement)
{
	QPointF p;
	QSizeF s = size();

	p.setX(pos.x() - s.width() / 2);
	if(placement == karin::overlay_toolbar::AbovePointOfInterest)
	{
		p.setY(pos.y() - s.height());
	}
	else
	{
		p.setY(pos.y());
	}
	setPos(p);
}
